# ЁЯПЖ р╕гр╕░р╕Ър╕Ър╣Гр╕Ър╕Ыр╕гр╕░р╕Бр╕▓р╕ир╕Щр╕╡р╕вр╕Ър╕▒р╕Хр╕г (Certificate System)

р╕гр╕░р╕Ър╕Ър╕нр╕нр╕Бр╣Гр╕Ър╕Ыр╕гр╕░р╕Бр╕▓р╕ир╕Щр╕╡р╕вр╕Ър╕▒р╕Хр╕гр╕Чр╕╡р╣Ир╕бр╕╡р╕Бр╕▓р╕гр╕вр╕╖р╕Щр╕вр╕▒р╕Щр╕Хр╕▒р╕зр╕Хр╕Щр╕кр╕│р╕лр╕гр╕▒р╕Ъ SkillNexus LMS

## тЬи р╕Яр╕╡р╣Ар╕Ир╕нр╕гр╣Мр╕лр╕ер╕▒р╕Б

### ЁЯОп р╕Бр╕▓р╕гр╕нр╕нр╕Бр╣Гр╕Ър╕Ыр╕гр╕░р╕Бр╕▓р╕ир╕Щр╕╡р╕вр╕Ър╕▒р╕Хр╕гр╕нр╕▒р╕Хр╣Вр╕Щр╕бр╕▒р╕Хр╕┤
- р╕нр╕нр╕Бр╣Гр╕Ър╕Ыр╕гр╕░р╕Бр╕▓р╕ир╕Щр╕╡р╕вр╕Ър╕▒р╕Хр╕гр╕нр╕▒р╕Хр╣Вр╕Щр╕бр╕▒р╕Хр╕┤р╣Ар╕бр╕╖р╣Ир╕нр╣Ар╕гр╕╡р╕вр╕Щр╕Ир╕Ър╕Др╕нр╕гр╣Мр╕к (100% completion)
- р╕гр╕лр╕▒р╕кр╣Гр╕Ър╕Ыр╕гр╕░р╕Бр╕▓р╕ир╕Щр╕╡р╕вр╕Ър╕▒р╕Хр╕гр╕Чр╕╡р╣Ир╣Др╕бр╣Ир╕Лр╣Йр╕│р╕Бр╕▒р╕Щ (Unique Certificate ID)
- р╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Ьр╕╣р╣Йр╕гр╕▒р╕Ъ, р╕Др╕нр╕гр╣Мр╕к, р╣Бр╕ер╕░р╕зр╕▒р╕Щр╕Чр╕╡р╣Ир╕нр╕нр╕Бр╣Гр╕Ър╕Ыр╕гр╕░р╕Бр╕▓р╕ир╕Щр╕╡р╕вр╕Ър╕▒р╕Хр╕г

### ЁЯУ▒ р╕лр╕Щр╣Йр╕▓р╕Ир╕▒р╕Фр╕Бр╕▓р╕гр╣Гр╕Ър╕Ыр╕гр╕░р╕Бр╕▓р╕ир╕Щр╕╡р╕вр╕Ър╕▒р╕Хр╕г
- р╣Бр╕кр╕Фр╕Зр╣Гр╕Ър╕Ыр╕гр╕░р╕Бр╕▓р╕ир╕Щр╕╡р╕вр╕Ър╕▒р╕Хр╕гр╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Фр╕Вр╕нр╕Зр╕Ьр╕╣р╣Йр╣Гр╕Кр╣Й
- р╕кр╕Цр╕┤р╕Хр╕┤р╣Гр╕Ър╕Ыр╕гр╕░р╕Бр╕▓р╕ир╕Щр╕╡р╕вр╕Ър╕▒р╕Хр╕г (р╕Ир╕│р╕Щр╕зр╕Щ, р╣Ар╕Фр╕╖р╕нр╕Щр╕Щр╕╡р╣Й, р╕Др╕нр╕гр╣Мр╕кр╕Чр╕╡р╣Ир╕Ир╕Ъ)
- р╕Ыр╕╕р╣Ир╕бр╕Фр╕╣, download, р╣Бр╕ер╕░ share

### ЁЯФН р╕гр╕░р╕Ър╕Ър╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╣Гр╕Ър╕Ыр╕гр╕░р╕Бр╕▓р╕ир╕Щр╕╡р╕вр╕Ър╕▒р╕Хр╕г
- р╕лр╕Щр╣Йр╕▓р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕Др╕зр╕▓р╕бр╕Цр╕╣р╕Бр╕Хр╣Йр╕нр╕Зр╕Вр╕нр╕Зр╣Гр╕Ър╕Ыр╕гр╕░р╕Бр╕▓р╕ир╕Щр╕╡р╕вр╕Ър╕▒р╕Хр╕г
- р╣Гр╕кр╣И Certificate ID р╣Ар╕Юр╕╖р╣Ир╕нр╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ
- р╣Бр╕кр╕Фр╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Ьр╕╣р╣Йр╕гр╕▒р╕Ър╣Бр╕ер╕░р╕Др╕нр╕гр╣Мр╕кр╕Чр╕╡р╣Ир╕Ир╕Ъ

### ЁЯУД Download & Share
- Download р╣Гр╕Ър╕Ыр╕гр╕░р╕Бр╕▓р╕ир╕Щр╕╡р╕вр╕Ър╕▒р╕Хр╕гр╣Ар╕Ыр╣Зр╕Щ HTML (р╕Юр╕гр╣Йр╕нр╕бр╕кр╣Др╕Хр╕ер╣Мр╕кр╕зр╕вр╕Зр╕▓р╕б)
- Share р╕ер╕┤р╕Зр╕Бр╣Мр╣Гр╕Ър╕Ыр╕гр╕░р╕Бр╕▓р╕ир╕Щр╕╡р╕вр╕Ър╕▒р╕Хр╕г
- Copy р╕ер╕┤р╕Зр╕Бр╣Мр╣Др╕Ыр╕вр╕▒р╕З clipboard

## ЁЯЧВя╕П р╣Вр╕Др╕гр╕Зр╕кр╕гр╣Йр╕▓р╕Зр╣Др╕Яр╕ер╣М

```
src/
тФЬтФАтФА app/
тФВ   тФЬтФАтФА actions/
тФВ   тФВ   тФФтФАтФА certificates.ts          # Server actions р╕кр╕│р╕лр╕гр╕▒р╕Ър╕Ир╕▒р╕Фр╕Бр╕▓р╕гр╣Гр╕Ър╕Ыр╕гр╕░р╕Бр╕▓р╕ир╕Щр╕╡р╕вр╕Ър╕▒р╕Хр╕г
тФВ   тФЬтФАтФА api/
тФВ   тФВ   тФФтФАтФА certificates/
тФВ   тФВ       тФФтФАтФА [id]/
тФВ   тФВ           тФФтФАтФА download/
тФВ   тФВ               тФФтФАтФА route.ts      # API р╕кр╕│р╕лр╕гр╕▒р╕Ъ download HTML
тФВ   тФЬтФАтФА certificates/
тФВ   тФВ   тФФтФАтФА [certificateId]/
тФВ   тФВ       тФФтФАтФА page.tsx             # р╕лр╕Щр╣Йр╕▓р╣Бр╕кр╕Фр╕Зр╣Гр╕Ър╕Ыр╕гр╕░р╕Бр╕▓р╕ир╕Щр╕╡р╕вр╕Ър╕▒р╕Хр╕г
тФВ   тФЬтФАтФА dashboard/
тФВ   тФВ   тФФтФАтФА certificates/
тФВ   тФВ       тФФтФАтФА page.tsx             # р╕лр╕Щр╣Йр╕▓р╕Ир╕▒р╕Фр╕Бр╕▓р╕гр╣Гр╕Ър╕Ыр╕гр╕░р╕Бр╕▓р╕ир╕Щр╕╡р╕вр╕Ър╕▒р╕Хр╕г
тФВ   тФФтФАтФА verify/
тФВ       тФФтФАтФА page.tsx                 # р╕лр╕Щр╣Йр╕▓р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╣Гр╕Ър╕Ыр╕гр╕░р╕Бр╕▓р╕ир╕Щр╕╡р╕вр╕Ър╕▒р╕Хр╕г
тФЬтФАтФА components/
тФВ   тФФтФАтФА course/
тФВ       тФФтФАтФА certificate-button.tsx   # р╕Ыр╕╕р╣Ир╕бр╕Вр╕нр╣Гр╕Ър╕Ыр╕гр╕░р╕Бр╕▓р╕ир╕Щр╕╡р╕вр╕Ър╕▒р╕Хр╕г
тФФтФАтФА scripts/
    тФФтФАтФА test-certificates.js         # р╕кр╕Др╕гр╕┤р╕Ыр╕Хр╣Мр╕Чр╕Фр╕кр╕нр╕Ър╕гр╕░р╕Ър╕Ъ
```

## ЁЯЪА р╕Бр╕▓р╕гр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ

### 1. р╕Бр╕▓р╕гр╕нр╕нр╕Бр╣Гр╕Ър╕Ыр╕гр╕░р╕Бр╕▓р╕ир╕Щр╕╡р╕вр╕Ър╕▒р╕Хр╕г

```typescript
import { generateCertificate } from '@/app/actions/certificates'

// р╕нр╕нр╕Бр╣Гр╕Ър╕Ыр╕гр╕░р╕Бр╕▓р╕ир╕Щр╕╡р╕вр╕Ър╕▒р╕Хр╕гр╕кр╕│р╕лр╕гр╕▒р╕Ър╕Др╕нр╕гр╣Мр╕к
const result = await generateCertificate(courseId)

if (result.success) {
  // р╣Др╕Ыр╕вр╕▒р╕Зр╕лр╕Щр╣Йр╕▓р╣Гр╕Ър╕Ыр╕гр╕░р╕Бр╕▓р╕ир╕Щр╕╡р╕вр╕Ър╕▒р╕Хр╕г
  router.push(`/certificates/${result.certificateId}`)
}
```

### 2. р╕Бр╕▓р╕гр╣Бр╕кр╕Фр╕Зр╣Гр╕Ър╕Ыр╕гр╕░р╕Бр╕▓р╕ир╕Щр╕╡р╕вр╕Ър╕▒р╕Хр╕гр╕Вр╕нр╕Зр╕Ьр╕╣р╣Йр╣Гр╕Кр╣Й

```typescript
import { getUserCertificates } from '@/app/actions/certificates'

// р╕Фр╕╢р╕Зр╣Гр╕Ър╕Ыр╕гр╕░р╕Бр╕▓р╕ир╕Щр╕╡р╕вр╕Ър╕▒р╕Хр╕гр╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Фр╕Вр╕нр╕Зр╕Ьр╕╣р╣Йр╣Гр╕Кр╣Й
const certificates = await getUserCertificates()
```

### 3. р╕Бр╕▓р╕гр╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╣Гр╕Ър╕Ыр╕гр╕░р╕Бр╕▓р╕ир╕Щр╕╡р╕вр╕Ър╕▒р╕Хр╕г

```typescript
import { verifyCertificate } from '@/app/actions/certificates'

// р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╣Гр╕Ър╕Ыр╕гр╕░р╕Бр╕▓р╕ир╕Щр╕╡р╕вр╕Ър╕▒р╕Хр╕гр╕Фр╣Йр╕зр╕в Certificate ID
const certificate = await verifyCertificate(certificateId)
```

### 4. р╕Бр╕▓р╕гр╣Гр╕Кр╣Йр╕Ыр╕╕р╣Ир╕бр╕Вр╕нр╣Гр╕Ър╕Ыр╕гр╕░р╕Бр╕▓р╕ир╕Щр╕╡р╕вр╕Ър╕▒р╕Хр╕г

```tsx
import { CertificateButton } from '@/components/course/certificate-button'

<CertificateButton
  courseId={courseId}
  completionPercentage={progress.completionPercentage}
  existingCertificateId={existingCertificate?.uniqueId}
/>
```

## ЁЯФз р╕Бр╕▓р╕гр╕Чр╕Фр╕кр╕нр╕Ъ

### р╕гр╕▒р╕Щр╕кр╕Др╕гр╕┤р╕Ыр╕Хр╣Мр╕Чр╕Фр╕кр╕нр╕Ъ
```bash
node scripts/test-certificates.js
```

р╕кр╕Др╕гр╕┤р╕Ыр╕Хр╣Мр╕Ир╕░:
1. р╕лр╕▓р╕Ьр╕╣р╣Йр╣Гр╕Кр╣Йр╣Бр╕ер╕░р╕Др╕нр╕гр╣Мр╕кр╕кр╕│р╕лр╕гр╕▒р╕Ър╕Чр╕Фр╕кр╕нр╕Ъ
2. р╕кр╕гр╣Йр╕▓р╕Зр╕Бр╕▓р╕гр╕ер╕Зр╕Чр╕░р╣Ар╕Ър╕╡р╕вр╕Щр╣Бр╕ер╕░ watch history
3. р╕кр╕гр╣Йр╕▓р╕Зр╣Гр╕Ър╕Ыр╕гр╕░р╕Бр╕▓р╕ир╕Щр╕╡р╕вр╕Ър╕▒р╕Хр╕г
4. р╣Бр╕кр╕Фр╕З URL р╕кр╕│р╕лр╕гр╕▒р╕Ър╕Чр╕Фр╕кр╕нр╕Ъ

### р╕Бр╕▓р╕гр╕Чр╕Фр╕кр╕нр╕Ър╣Бр╕Ър╕Ъ Manual

1. **р╕Чр╕Фр╕кр╕нр╕Ър╕Бр╕▓р╕гр╕нр╕нр╕Бр╣Гр╕Ър╕Ыр╕гр╕░р╕Бр╕▓р╕ир╕Щр╕╡р╕вр╕Ър╕▒р╕Хр╕г:**
   - р╣Ар╕гр╕╡р╕вр╕Щр╕Др╕нр╕гр╣Мр╕кр╣Гр╕лр╣Йр╕Ир╕Ъ (100%)
   - р╕Бр╕Фр╕Ыр╕╕р╣Ир╕б "р╕гр╕▒р╕Ър╣Гр╕Ър╕Ыр╕гр╕░р╕Бр╕▓р╕ир╕Щр╕╡р╕вр╕Ър╕▒р╕Хр╕г"

2. **р╕Чр╕Фр╕кр╕нр╕Ър╕Бр╕▓р╕гр╕Фр╕╣р╣Гр╕Ър╕Ыр╕гр╕░р╕Бр╕▓р╕ир╕Щр╕╡р╕вр╕Ър╕▒р╕Хр╕г:**
   - р╣Др╕Ыр╕Чр╕╡р╣И `/dashboard/certificates`
   - р╕Др╕ер╕┤р╕Бр╕Ыр╕╕р╣Ир╕б "р╕Фр╕╣" р╣Гр╕Щр╣Гр╕Ър╕Ыр╕гр╕░р╕Бр╕▓р╕ир╕Щр╕╡р╕вр╕Ър╕▒р╕Хр╕гр╣Гр╕Фр╣Ж

3. **р╕Чр╕Фр╕кр╕нр╕Ър╕Бр╕▓р╕г Download:**
   - р╕Др╕ер╕┤р╕Бр╕Ыр╕╕р╣Ир╕б "Download HTML"
   - р╣Др╕Яр╕ер╣М HTML р╕Ир╕░р╕Цр╕╣р╕Бр╕Фр╕▓р╕зр╕Щр╣Мр╣Вр╕лр╕ер╕Ф

4. **р╕Чр╕Фр╕кр╕нр╕Ър╕Бр╕▓р╕г Share:**
   - р╕Др╕ер╕┤р╕Бр╕Ыр╕╕р╣Ир╕б Share
   - р╕ер╕┤р╕Зр╕Бр╣Мр╕Ир╕░р╕Цр╕╣р╕Б copy р╣Др╕Ыр╕вр╕▒р╕З clipboard

5. **р╕Чр╕Фр╕кр╕нр╕Ър╕Бр╕▓р╕гр╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ:**
   - р╣Др╕Ыр╕Чр╕╡р╣И `/verify`
   - р╣Гр╕кр╣И Certificate ID
   - р╕Бр╕Фр╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ

## ЁЯОи р╕Бр╕▓р╕гр╕Ыр╕гр╕▒р╕Ър╣Бр╕Хр╣Ир╕З

### р╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╕Фр╕╡р╣Др╕Лр╕Щр╣Мр╣Гр╕Ър╕Ыр╕гр╕░р╕Бр╕▓р╕ир╕Щр╕╡р╕вр╕Ър╕▒р╕Хр╕г
р╣Бр╕Бр╣Йр╣Др╕Вр╣Др╕Яр╕ер╣М `/certificates/[certificateId]/page.tsx` р╣Бр╕ер╕░ `/api/certificates/[id]/download/route.ts`

### р╣Ар╕Юр╕┤р╣Ир╕бр╕Яр╕┤р╕ер╕Фр╣Мр╕Вр╣Йр╕нр╕бр╕╣р╕е
р╣Бр╕Бр╣Йр╣Др╕В Prisma schema р╣Бр╕ер╕░ server actions р╣Гр╕Щ `certificates.ts`

### р╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Ар╕Зр╕╖р╣Ир╕нр╕Щр╣Др╕Вр╕Бр╕▓р╕гр╕нр╕нр╕Бр╣Гр╕Ър╕Ыр╕гр╕░р╕Бр╕▓р╕ир╕Щр╕╡р╕вр╕Ър╕▒р╕Хр╕г
р╣Бр╕Бр╣Йр╣Др╕Вр╕Яр╕▒р╕Зр╕Бр╣Мр╕Кр╕▒р╕Щ `getCourseProgress` р╣Гр╕Щ `certificates.ts`

## ЁЯФР р╕Др╕зр╕▓р╕бр╕Ыр╕ер╕нр╕Фр╕ар╕▒р╕в

- тЬЕ р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕кр╕┤р╕Чр╕Шр╕┤р╣Мр╕Ьр╕╣р╣Йр╣Гр╕Кр╣Йр╕Бр╣Ир╕нр╕Щр╕нр╕нр╕Бр╣Гр╕Ър╕Ыр╕гр╕░р╕Бр╕▓р╕ир╕Щр╕╡р╕вр╕Ър╕▒р╕Хр╕г
- тЬЕ р╣Ар╕Йр╕Юр╕▓р╕░р╣Ар╕Ир╣Йр╕▓р╕Вр╕нр╕Зр╕лр╕гр╕╖р╕н Admin р╣Ар╕Чр╣Ир╕▓р╕Щр╕▒р╣Йр╕Щр╕Чр╕╡р╣И download р╣Др╕Фр╣Й
- тЬЕ Certificate ID р╕Чр╕╡р╣Ир╣Др╕бр╣Ир╕Лр╣Йр╕│р╕Бр╕▒р╕Щр╣Бр╕ер╕░р╕вр╕▓р╕Бр╕Хр╣Ир╕нр╕Бр╕▓р╕гр╣Ар╕Фр╕▓
- тЬЕ р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕Бр╕▓р╕гр╣Ар╕гр╕╡р╕вр╕Щр╕Ир╕Ър╕Ир╕гр╕┤р╕Зр╕Бр╣Ир╕нр╕Щр╕нр╕нр╕Бр╣Гр╕Ър╕Ыр╕гр╕░р╕Бр╕▓р╕ир╕Щр╕╡р╕вр╕Ър╕▒р╕Хр╕г

## ЁЯУК Database Schema

```prisma
model Certificate {
  id        String   @id @default(cuid())
  uniqueId  String   @unique @default(cuid())
  userId    String
  courseId  String
  issuedAt  DateTime @default(now())

  user   User   @relation(fields: [userId], references: [id])
  course Course @relation(fields: [courseId], references: [id])

  @@unique([userId, courseId])
}
```

## ЁЯМР URLs р╕кр╕│р╕Др╕▒р╕Н

- **р╕лр╕Щр╣Йр╕▓р╣Гр╕Ър╕Ыр╕гр╕░р╕Бр╕▓р╕ир╕Щр╕╡р╕вр╕Ър╕▒р╕Хр╕г:** `/certificates/[certificateId]`
- **р╕Ир╕▒р╕Фр╕Бр╕▓р╕гр╣Гр╕Ър╕Ыр╕гр╕░р╕Бр╕▓р╕ир╕Щр╕╡р╕вр╕Ър╕▒р╕Хр╕г:** `/dashboard/certificates`
- **р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╣Гр╕Ър╕Ыр╕гр╕░р╕Бр╕▓р╕ир╕Щр╕╡р╕вр╕Ър╕▒р╕Хр╕г:** `/verify`
- **Download API:** `/api/certificates/[id]/download`

## ЁЯОп р╕Яр╕╡р╣Ар╕Ир╕нр╕гр╣Мр╕Чр╕╡р╣Ир╕Ир╕░р╣Ар╕Юр╕┤р╣Ир╕бр╣Гр╕Щр╕нр╕Щр╕▓р╕Др╕Х

- [ ] PDF Generation р╕Фр╣Йр╕зр╕в Puppeteer
- [ ] Email р╣Бр╕Ир╣Йр╕Зр╣Ар╕Хр╕╖р╕нр╕Щр╣Ар╕бр╕╖р╣Ир╕нр╣Др╕Фр╣Йр╕гр╕▒р╕Ър╣Гр╕Ър╕Ыр╕гр╕░р╕Бр╕▓р╕ир╕Щр╕╡р╕вр╕Ър╕▒р╕Хр╕г
- [ ] QR Code р╕кр╕│р╕лр╕гр╕▒р╕Ъ verification
- [ ] Blockchain verification
- [ ] Template р╣Гр╕Ър╕Ыр╕гр╕░р╕Бр╕▓р╕ир╕Щр╕╡р╕вр╕Ър╕▒р╕Хр╕гр╕лр╕ер╕▓р╕вр╣Бр╕Ър╕Ъ
- [ ] Batch certificate generation р╕кр╕│р╕лр╕гр╕▒р╕Ъ Admin