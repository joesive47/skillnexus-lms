# ЁЯОд Voice Practice Feature

## р╕ар╕▓р╕Юр╕гр╕зр╕б

р╕Яр╕╡р╣Ар╕Ир╕нр╕гр╣М **Voice Practice** (р╕Бр╕▓р╕гр╕Эр╕╢р╕Бр╕Юр╕╣р╕Ф) р╣Ар╕Ыр╣Зр╕Щр╕гр╕░р╕Ър╕Ър╕Чр╕╡р╣Ир╕Кр╣Ир╕зр╕вр╣Гр╕лр╣Йр╕Щр╕▒р╕Бр╣Ар╕гр╕╡р╕вр╕Щр╕Эр╕╢р╕Бр╕Чр╕▒р╕Бр╕йр╕░р╕Бр╕▓р╕гр╕Юр╕╣р╕Фр╣Бр╕ер╕░р╕гр╕▒р╕Ъ Feedback р╕Ир╕▓р╕Б AI р╣Бр╕Ър╕Ър╕нр╕▒р╕Хр╣Вр╕Щр╕бр╕▒р╕Хр╕┤

## ЁЯМЯ р╕Ир╕╕р╕Фр╣Ар╕Фр╣Ир╕Щ

### 2 р╣Вр╕лр╕бр╕Фр╣Гр╕лр╣Йр╣Ар╕ер╕╖р╕нр╕Б

#### ЁЯУж FREE Mode (р╕Яр╕гр╕╡)
- р╣Гр╕Кр╣Й Web Speech API р╕Вр╕нр╕Зр╣Ар╕Ър╕гр╕▓р╕зр╣Мр╣Ар╕Лр╕нр╕гр╣М
- р╣Бр╕Ыр╕ер╕Зр╣Ар╕кр╕╡р╕вр╕Зр╣Ар╕Ыр╣Зр╕Щр╕Вр╣Йр╕нр╕Др╕зр╕▓р╕б
- р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕Др╕│р╕кр╕│р╕Др╕▒р╕Н
- р╕Др╕│р╕Щр╕зр╕Ур╕Др╕░р╣Бр╕Щр╕Щр╕Др╕зр╕▓р╕бр╕Цр╕╣р╕Бр╕Хр╣Йр╕нр╕З
- р╣Гр╕лр╣Й Feedback р╕Юр╕╖р╣Йр╕Щр╕Рр╕▓р╕Щ
- **р╣Гр╕Кр╣Йр╣Др╕Фр╣Йр╣Др╕бр╣Ир╕Ир╕│р╕Бр╕▒р╕Ф**

#### ЁЯТО PREMIUM Mode (5 р╣Ар╕Др╕гр╕Фр╕┤р╕Х)
- р╣Гр╕Кр╣Й OpenAI Whisper API (р╣Бр╕бр╣Ир╕Щр╕вр╕│р╕кр╕╣р╕З)
- р╕зр╕┤р╣Ар╕Др╕гр╕▓р╕░р╕лр╣Мр╣Др╕зр╕вр╕▓р╕Бр╕гр╕Ур╣Мр╕Фр╣Йр╕зр╕в GPT-4
- р╕Ыр╕гр╕░р╣Ар╕бр╕┤р╕Щр╕Др╕│р╕ир╕▒р╕Юр╕Чр╣Мр╣Бр╕ер╕░р╕гр╕░р╕Фр╕▒р╕Ър╕ар╕▓р╕йр╕▓
- р╕зр╕┤р╣Ар╕Др╕гр╕▓р╕░р╕лр╣Мр╕Др╕зр╕▓р╕бр╕Др╕ер╣Ир╕нр╕Зр╣Бр╕Др╕ер╣Ир╕з
- р╣Гр╕лр╣Й Feedback р╣Бр╕Ър╕Ъ AI р╕кр╕гр╣Йр╕▓р╕Зр╣Ар╕нр╕З
- **р╕Хр╣Йр╕нр╕Зр╣Гр╕Кр╣Йр╣Ар╕Др╕гр╕Фр╕┤р╕Х 5 р╣Ар╕Др╕гр╕Фр╕┤р╕Х/р╕Др╕гр╕▒р╣Йр╕З**

## ЁЯУБ р╣Вр╕Др╕гр╕Зр╕кр╕гр╣Йр╕▓р╕Зр╣Др╕Яр╕ер╣М

```
src/
тФЬтФАтФА app/
тФВ   тФЬтФАтФА api/
тФВ   тФВ   тФФтФАтФА voice/
тФВ   тФВ       тФЬтФАтФА analyze/route.ts          # API р╕зр╕┤р╣Ар╕Др╕гр╕▓р╕░р╕лр╣Мр╣Ар╕кр╕╡р╕вр╕З
тФВ   тФВ       тФФтФАтФА assignment/route.ts       # API р╕Ир╕▒р╕Фр╕Бр╕▓р╕гр╣Бр╕Ър╕Ър╕Эр╕╢р╕Бр╕лр╕▒р╕Ф
тФВ   тФЬтФАтФА lesson/[id]/voice-practice/
тФВ   тФВ   тФФтФАтФА page.tsx                      # р╕лр╕Щр╣Йр╕▓р╕Щр╕▒р╕Бр╣Ар╕гр╕╡р╕вр╕Щр╕Эр╕╢р╕Бр╕Юр╕╣р╕Ф
тФВ   тФФтФАтФА dashboard/admin/voice-assignments/
тФВ       тФФтФАтФА page.tsx                      # р╕лр╕Щр╣Йр╕▓р╕Др╕гр╕╣р╕кр╕гр╣Йр╕▓р╕Зр╣Бр╕Ър╕Ър╕Эр╕╢р╕Бр╕лр╕▒р╕Ф
тФЬтФАтФА components/voice/
тФВ   тФЬтФАтФА voice-recorder.tsx                # Component р╕нр╕▒р╕Фр╣Ар╕кр╕╡р╕вр╕З
тФВ   тФФтФАтФА voice-practice.tsx                # Component р╕лр╕ер╕▒р╕Б
тФФтФАтФА lib/
    тФФтФАтФА voice-analysis.ts                 # Logic р╕зр╕┤р╣Ар╕Др╕гр╕▓р╕░р╕лр╣Мр╣Ар╕кр╕╡р╕вр╕З
```

## ЁЯОп Use Cases

### 1. р╕ар╕▓р╕йр╕▓р╕Хр╣Ир╕▓р╕Зр╕Ыр╕гр╕░р╣Ар╕Чр╕и
- р╕Эр╕╢р╕Бр╕нр╕нр╕Бр╣Ар╕кр╕╡р╕вр╕З
- р╕Эр╕╢р╕Бр╕кр╕│р╣Ар╕Щр╕╡р╕вр╕З
- р╕Эр╕╢р╕Бр╕Бр╕▓р╕гр╕кр╕Щр╕Чр╕Щр╕▓

### 2. р╕Бр╕▓р╕гр╕Щр╕│р╣Ар╕кр╕Щр╕н
- р╕Эр╕╢р╕Бр╕Юр╕╣р╕Фр╣Гр╕Щр╕Чр╕╡р╣Ир╕кр╕▓р╕Шр╕▓р╕гр╕Ур╕░
- р╕Эр╕╢р╕Б Pitch
- р╕Эр╕╢р╕Бр╕Бр╕▓р╕гр╕Щр╕│р╣Ар╕кр╕Щр╕нр╕Ьр╕ер╕Зр╕▓р╕Щ

### 3. р╕Чр╕▒р╕Бр╕йр╕░р╕Бр╕▓р╕гр╕кр╕╖р╣Ир╕нр╕кр╕▓р╕г
- р╕Эр╕╢р╕Бр╕Бр╕▓р╕гр╣Бр╕Щр╕░р╕Щр╕│р╕Хр╕▒р╕з
- р╕Эр╕╢р╕Бр╕Бр╕▓р╕гр╕Хр╕нр╕Ър╕Др╕│р╕Цр╕▓р╕б
- р╕Эр╕╢р╕Бр╕Бр╕▓р╕гр╕нр╕Шр╕┤р╕Ър╕▓р╕в

## ЁЯФД Flow р╕Бр╕▓р╕гр╕Чр╕│р╕Зр╕▓р╕Щ

### р╕кр╕│р╕лр╕гр╕▒р╕Ър╕Др╕гр╕╣/Admin:
1. р╣Ар╕Вр╣Йр╕▓ `/dashboard/admin/voice-assignments`
2. р╣Ар╕ер╕╖р╕нр╕Бр╕Ър╕Чр╣Ар╕гр╕╡р╕вр╕Щ
3. р╕Бр╕гр╕нр╕Бр╕гр╕▓р╕вр╕ер╕░р╣Ар╕нр╕╡р╕вр╕Фр╣Бр╕Ър╕Ър╕Эр╕╢р╕Бр╕лр╕▒р╕Ф
4. р╕Бр╕│р╕лр╕Щр╕Фр╣Ар╕Бр╕Ур╕Ср╣Мр╕Бр╕▓р╕гр╣Гр╕лр╣Йр╕Др╕░р╣Бр╕Щр╕Щ
5. р╕Ър╕▒р╕Щр╕Чр╕╢р╕Б

### р╕кр╕│р╕лр╕гр╕▒р╕Ър╕Щр╕▒р╕Бр╣Ар╕гр╕╡р╕вр╕Щ:
1. р╣Ар╕Вр╣Йр╕▓р╕Ър╕Чр╣Ар╕гр╕╡р╕вр╕Щр╕Чр╕╡р╣Ир╕бр╕╡ Voice Assignment
2. р╕Др╕ер╕┤р╕Б "ЁЯОд р╣Ар╕гр╕┤р╣Ир╕бр╕Эр╕╢р╕Бр╕Юр╕╣р╕Ф"
3. р╣Ар╕ер╕╖р╕нр╕Бр╣Вр╕лр╕бр╕Ф (FREE/PREMIUM)
4. р╕нр╕▒р╕Фр╣Ар╕кр╕╡р╕вр╕З
5. р╕кр╣Ир╕Зр╕Зр╕▓р╕Щ
6. р╕гр╕▒р╕Ър╕Ьр╕ер╕Др╕░р╣Бр╕Щр╕Щр╣Бр╕ер╕░ Feedback
7. р╕ер╕нр╕Зр╣Гр╕лр╕бр╣Ир╣Др╕Фр╣Й (р╕Хр╕▓р╕бр╕Ир╕│р╕Щр╕зр╕Щр╕Др╕гр╕▒р╣Йр╕Зр╕Чр╕╡р╣Ир╕Бр╕│р╕лр╕Щр╕Ф)

## ЁЯУК р╕Хр╕▒р╕зр╕нр╕вр╣Ир╕▓р╕Зр╕Ьр╕ер╕ер╕▒р╕Юр╕Шр╣М

### FREE Mode:
```json
{
  "wordCount": 45,
  "duration": 32,
  "accuracy": 85,
  "keywordsFound": ["learning", "education", "technology"],
  "keywordsMissing": ["innovation"],
  "feedback": "р╕Др╕╕р╕Ур╕Юр╕╣р╕Фр╣Др╕Фр╣Й 45 р╕Др╕│р╣Гр╕Щ 32 р╕зр╕┤р╕Щр╕▓р╕Чр╕╡ р╕Др╕зр╕▓р╕бр╕Цр╕╣р╕Бр╕Хр╣Йр╕нр╕З 85% р╕Фр╕╡р╕бр╕▓р╕Б...",
  "score": 85
}
```

### PREMIUM Mode:
```json
{
  "wordCount": 45,
  "duration": 32,
  "accuracy": 92,
  "grammar": {
    "score": 88,
    "issues": ["р╣Гр╕Кр╣Й 'was' р╣Бр╕Чр╕Щ 'were' р╣Гр╕Щр╕Ыр╕гр╕░р╣Вр╕вр╕Др╕Чр╕╡р╣И 3"]
  },
  "vocabulary": {
    "score": 90,
    "level": "B2",
    "suggestions": ["р╕ер╕нр╕Зр╣Гр╕Кр╣Й 'implement' р╣Бр╕Чр╕Щ 'use'"]
  },
  "fluency": {
    "score": 85,
    "wordsPerMinute": 84,
    "pauseCount": 3
  },
  "feedback": "р╕Бр╕▓р╕гр╕Щр╕│р╣Ар╕кр╕Щр╕нр╕Вр╕нр╕Зр╕Др╕╕р╕Ур╕бр╕╡р╕Др╕зр╕▓р╕бр╕Кр╕▒р╕Фр╣Ар╕Ир╕Щр╣Бр╕ер╕░р╕бр╕▒р╣Ир╕Щр╣Гр╕И...",
  "score": 88
}
```

## ЁЯТ╗ API Endpoints

### POST `/api/voice/analyze`
р╕зр╕┤р╣Ар╕Др╕гр╕▓р╕░р╕лр╣Мр╣Ар╕кр╕╡р╕вр╕Зр╕Чр╕╡р╣Ир╕нр╕▒р╕Ф

**Request:**
```typescript
FormData {
  assignmentId: string
  audio: File
  aiMode: 'FREE' | 'PREMIUM'
  attempt: number
  transcription?: string  // р╕кр╕│р╕лр╕гр╕▒р╕Ъ FREE mode
}
```

**Response:**
```typescript
{
  success: boolean
  submission: {
    id: string
    score: number
    feedback: string
    status: 'PASS' | 'FAIL'
    transcription: string
    analysis: object
    creditsUsed: number
  }
}
```

### POST `/api/voice/assignment`
р╕кр╕гр╣Йр╕▓р╕Зр╣Бр╕Ър╕Ър╕Эр╕╢р╕Бр╕лр╕▒р╕Фр╣Гр╕лр╕бр╣И

**Request:**
```typescript
{
  lessonId: string
  title: string
  instruction: string
  targetText?: string
  keywords?: string[]
  minWords: number
  maxDuration: number
  passingScore: number
  maxAttempts: number
}
```

### GET `/api/voice/assignment?lessonId={id}`
р╕Фр╕╢р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Бр╕Ър╕Ър╕Эр╕╢р╕Бр╕лр╕▒р╕Ф

## ЁЯОи UI Components

### VoiceRecorder
Component р╕кр╕│р╕лр╕гр╕▒р╕Ър╕нр╕▒р╕Фр╣Ар╕кр╕╡р╕вр╕З
- р╕гр╕нр╕Зр╕гр╕▒р╕Ъ MediaRecorder API
- р╣Бр╕кр╕Фр╕Зр╣Ар╕зр╕ер╕▓р╕Чр╕╡р╣Ир╕нр╕▒р╕Ф
- р╕гр╕нр╕Зр╕гр╕▒р╕Ъ Web Speech API (FREE mode)
- р╣Бр╕кр╕Фр╕З Transcription р╣Бр╕Ър╕Ъ Real-time

### VoicePractice
Component р╕лр╕ер╕▒р╕Бр╕кр╕│р╕лр╕гр╕▒р╕Ър╕Эр╕╢р╕Бр╕Юр╕╣р╕Ф
- р╣Ар╕ер╕╖р╕нр╕Бр╣Вр╕лр╕бр╕Ф FREE/PREMIUM
- р╣Бр╕кр╕Фр╕Зр╕Др╕│р╣Бр╕Щр╕░р╕Щр╕│
- р╣Бр╕кр╕Фр╕Зр╕Ьр╕ер╕Др╕░р╣Бр╕Щр╕Щ
- р╣Бр╕кр╕Фр╕З Feedback
- р╕гр╕нр╕Зр╕гр╕▒р╕Ър╕Бр╕▓р╕гр╕ер╕нр╕Зр╣Гр╕лр╕бр╣И

## ЁЯФР Security

- тЬЕ р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ Authentication
- тЬЕ р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╣Ар╕Др╕гр╕Фр╕┤р╕Хр╕Бр╣Ир╕нр╕Щр╣Гр╕Кр╣Й PREMIUM
- тЬЕ р╕Ир╕│р╕Бр╕▒р╕Фр╕Ир╕│р╕Щр╕зр╕Щр╕Др╕гр╕▒р╣Йр╕Зр╕Чр╕╡р╣Ир╕ер╕нр╕Зр╣Др╕Фр╣Й
- тЬЕ Validate р╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Чр╕▒р╣Йр╕З Client р╣Бр╕ер╕░ Server

## ЁЯЪА Performance

- тЬЕ р╣Гр╕Кр╣Й Web Speech API р╕кр╕│р╕лр╕гр╕▒р╕Ъ FREE mode (р╣Др╕бр╣Ир╕бр╕╡р╕Др╣Ир╕▓р╣Гр╕Кр╣Йр╕Ир╣Ир╕▓р╕в)
- тЬЕ р╣Ар╕гр╕╡р╕вр╕Б OpenAI API р╣Ар╕Йр╕Юр╕▓р╕░ PREMIUM mode
- тЬЕ р╕Ър╕▒р╕Щр╕Чр╕╢р╕Бр╕Ьр╕ер╕ер╕▒р╕Юр╕Шр╣Мр╣Гр╕Щр╕Рр╕▓р╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕е
- тЬЕ р╕гр╕нр╕Зр╕гр╕▒р╕Ър╕Бр╕▓р╕гр╕нр╕▒р╕Фр╣Ар╕кр╕╡р╕вр╕Зр╣Бр╕Ър╕Ъ Streaming

## ЁЯУ▒ Browser Support

### FREE Mode:
- тЬЕ Chrome/Edge (р╣Бр╕Щр╕░р╕Щр╕│)
- тЬЕ Safari
- тЪая╕П Firefox (р╕Ир╕│р╕Бр╕▒р╕Ф)

### PREMIUM Mode:
- тЬЕ р╕Чр╕╕р╕Бр╣Ар╕Ър╕гр╕▓р╕зр╣Мр╣Ар╕Лр╕нр╕гр╣Мр╕Чр╕╡р╣Ир╕гр╕нр╕Зр╕гр╕▒р╕Ъ MediaRecorder API

## ЁЯОУ р╕Хр╕▒р╕зр╕нр╕вр╣Ир╕▓р╕Зр╕Бр╕▓р╕гр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ

### р╕Хр╕▒р╕зр╕нр╕вр╣Ир╕▓р╕Зр╕Чр╕╡р╣И 1: р╕ар╕▓р╕йр╕▓р╕нр╕▒р╕Зр╕Бр╕др╕йр╕Юр╕╖р╣Йр╕Щр╕Рр╕▓р╕Щ
```
Title: "Self Introduction"
Instruction: "Introduce yourself in English. Include your name, age, hobby, and education."
Target Text: "Hello, my name is..."
Keywords: ["name", "age", "hobby", "education"]
Min Words: 30
Max Duration: 60 seconds
Passing Score: 70%
```

### р╕Хр╕▒р╕зр╕нр╕вр╣Ир╕▓р╕Зр╕Чр╕╡р╣И 2: р╕Бр╕▓р╕гр╕Щр╕│р╣Ар╕кр╕Щр╕нр╕Шр╕╕р╕гр╕Бр╕┤р╕И
```
Title: "Business Pitch"
Instruction: "Present your business idea in 2 minutes."
Keywords: ["problem", "solution", "market", "revenue"]
Min Words: 100
Max Duration: 120 seconds
Passing Score: 80%
```

## ЁЯФз Configuration

### р╕Ыр╕гр╕▒р╕Ър╕Ир╕│р╕Щр╕зр╕Щр╣Ар╕Др╕гр╕Фр╕┤р╕Х:
```typescript
// src/app/api/voice/analyze/route.ts
creditsUsed = 5  // р╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╕Хр╕▓р╕бр╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕г
```

### р╕Ыр╕гр╕▒р╕Ър╕ар╕▓р╕йр╕▓:
```typescript
// src/components/voice/voice-recorder.tsx
recognitionRef.current.lang = 'th-TH'  // р╕лр╕гр╕╖р╕н 'en-US'
```

### р╕Ыр╕гр╕▒р╕Ъ AI Prompt:
```typescript
// src/lib/voice-analysis.ts
const prompt = `р╕зр╕┤р╣Ар╕Др╕гр╕▓р╕░р╕лр╣Мр╕Бр╕▓р╕гр╕Юр╕╣р╕Ф...`  // р╣Бр╕Бр╣Йр╣Др╕В prompt
```

## ЁЯУИ Future Enhancements

- тП│ Pronunciation Assessment (Azure Speech)
- тП│ р╣Ар╕Ыр╕гр╕╡р╕вр╕Ър╣Ар╕Чр╕╡р╕вр╕Ър╕Бр╕▒р╕Ър╣Ар╕кр╕╡р╕вр╕Зр╕Хр╕▒р╕зр╕нр╕вр╣Ир╕▓р╕З
- тП│ р╕Бр╕гр╕▓р╕Яр╣Бр╕кр╕Фр╕Зр╕Др╕зр╕▓р╕бр╕Бр╣Йр╕▓р╕зр╕лр╕Щр╣Йр╕▓
- тП│ Leaderboard
- тП│ р╕Бр╕▓р╕гр╣Бр╕Кр╕гр╣Мр╕Ьр╕ер╕Зр╕▓р╕Щ
- тП│ р╕гр╕нр╕Зр╕гр╕▒р╕Ър╕лр╕ер╕▓р╕вр╕ар╕▓р╕йр╕▓

## ЁЯУЮ Support

р╕лр╕▓р╕Бр╕Юр╕Ър╕Ыр╕▒р╕Нр╕лр╕▓:
1. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ Browser Console
2. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ Network Tab
3. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ OpenAI API Key
4. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╣Ар╕Др╕гр╕Фр╕┤р╕Х

---

**Version:** 1.0.0  
**Last Updated:** 2024  
**Status:** тЬЕ Production Ready
